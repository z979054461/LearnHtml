<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./index.css">
    <title>Document</title>
</head>

<body>
    <div class="container">
        <div class="rocket">
            <img src="./rocket.png" alt="">
        </div>
    </div>
    <script>
        function random(m, n) {
            return Math.ceil(Math.random() * (n - m + 1)) + m - 1;
        }
        const MaxValue = 40;
        const container = document.querySelector('.container');
        const rocket = container.querySelector('.rocket');
        let light;
        for (let i = 0; i < MaxValue; i++) {
            light = document.createElement('i');
            light.style.height = random(30, 100) + 'px';
            light.style.left = random(1, 99) + 'vw';
            light.style.animationDuration = ~~random(5, 30) / 10 + 's';
            container.appendChild(light)
        }
        const keyOffset = 15; //按键偏移
        //初始位置
        let leftOffset = 0;
        let topOffset = -100;
        document.addEventListener('keydown', e => {
            switch (e.keyCode) {
                case 37: //left
                    if (rocket.offsetLeft - keyOffset < 0) return;
                    leftOffset -= keyOffset
                    rocket.style.left = `${leftOffset}px`
                    break;
                case 39: //right
                    if (rocket.offsetLeft + rocket.offsetWidth + keyOffset > container.offsetWidth) return;
                    leftOffset += keyOffset
                    rocket.style.left = `${leftOffset}px`
                    break;
                case 38: //up
                    if (rocket.offsetTop - keyOffset < 0) return;
                    topOffset -= keyOffset
                    rocket.style.top = `${topOffset}px`
                    break;
                case 40: //down
                    if (rocket.offsetTop + rocket.offsetHeight + keyOffset > container.offsetHeight)
                        return;
                    topOffset += keyOffset
                    rocket.style.top = `${topOffset}px`
                    break;
            }
        })
    </script>
</body>

</html>